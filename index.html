<!doctype html>
<html lang="ru">

<head>
	<meta charset="utf-8">

	<title>Осторожно, закэшировано!</title>

	<meta name="description" content="Про кеширование приложений на языке JavaScript">
	<meta name="author" content="Сергей Жигалов">

	<meta name="apple-mobile-web-app-capable" content="yes">
	<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">

	<link rel="stylesheet" href="css/reveal.css">
	<link rel="stylesheet" href="css/theme/white.css">
    <link rel="stylesheet" href="css/user.css">

	<!-- Code syntax highlighting -->
	<link rel="stylesheet" href="lib/css/default.min.css">

	<!--[if lt IE 9]>
	<script src="lib/js/html5shiv.js"></script>
	<![endif]-->
</head>

<body>

<div class="reveal">

	<!-- Any section element inside of this container is displayed as a slide -->
<div class="slides">

<section>
    <h2>Осторожно, закэшировано!</h2>
</section>

<section>
    <section class="vertical">
        <h3>Простому фронтендеру?</h3>

        <p class="fragment middle idea size-XL">
            Сделать мое приложение в 2 раза быстрее
            потратив на это пол дня.
        </p>
    </section>

    <section class="vertical">
        <h3>Простому фронтендеру?</h3>

        <p class="fragment middle idea size-XL">
            Пережить нагрузку в черную пятницу.
        </p>
    </section>

    <section class="vertical">
        <h3>Простому фронтендеру?</h3>

        <p class="fragment middle idea size-XL">
            Освободить половину серверов.
        </p>
    </section>
</section>

<section>
    <h3>Что кешировать</h3>

    <p class="pos left fragment size-L">Статика</p>
    <p class="pos left fragment size-L">Данные</p>
    <p class="pos left fragment size-L">Результаты вычислений</p>
</section>

<section>
    <section>
        <h3>Из коробки</h3>
    </section>
</section>

<section>
    <section>
        <h3>В памяти</h3>
    </section>

    <section class="vertical">
        <h3>Задача</h3>

        <p class="fragment middle idea size-XL">
            Показать список сортов кофе
        </p>
    </section>

    <section>
        <pre><code class="hljs javascript size-S" data-trim>
var app = express();
        </code></pre>

        <pre class="fragment"><code class="hljs javascript size-S" data-trim>
app.get('/', (req, res) => {
    fetchProducts()
        .then(data => res.json(data));
});
        </code></pre>

        <pre class="fragment"><code class="hljs javascript size-S" data-trim>
app.listen(3000);
        </code></pre>
    </section>

    <section data-background="images/00_no-cache.jpg" class="image">
        <h3>Без кеша</h3>
    </section>

    <section>
        <h3>В переменной</h3>
    </section>

    <section>
        <pre><code class="hljs javascript size-S" data-trim>
var cache;
        </code></pre>

        <pre class="fragment"><code class="hljs javascript size-S" data-trim>
app.get('/', (req, res) => {
    cache = cache || fetchProducts();
    cache.then(data => res.json(data));
});
        </code></pre>
    </section>

    <section data-background="images/01_in-memory.jpg" class="image">
        <h3>В переменной</h3>
    </section>

    <section>
        <h3>lru-cache</h3>
    </section>

    <section>
        <pre><code class="hljs javascript size-S" data-trim>
var LRU = require('lru-cache');
var cache = LRU({ maxAge: 3000 });
        </code></pre>

        <pre class="fragment"><code class="hljs javascript size-S" data-trim>
app.get('/', (req, res) => {
    if (!cache.has('coffee')) {
      cache.set('coffee', fetchProducts());
    }

    cache
        .get('coffee')
        .then(data => res.json(data));
});
        </code></pre>
    </section>

    <section data-background="images/02_lru-cache.jpg" class="image">
        <h3>lru-cache</h3>
    </section>
</section>

<section>
    <section>
        <h3>Распределенный кэш</h3>
    </section>
</section>

<section>
    <section>
        <h3>Хранилище</h3>
    </section>
</section>

<section>
    <section>
        <h3>Эффективность кэша</h3>
    </section>
</section>

<section>
    <section>
        <h3>Разогрев кэша</h3>
    </section>
</section>

<section>
    <section>
        <h3>Алгоритмы инвалидации</h3>
    </section>
</section>

</div>

</div>

	<script src="lib/js/head.min.js"></script>
	<script src="js/reveal.js"></script>

	<script>

		// Full list of configuration options available at:
		// https://github.com/hakimel/reveal.js#configuration
		Reveal.initialize({
			controls: false,
			progress: true,
            slideNumber: true,
			center: true,
			transition: 'slide',
            history: true,
            dependencies: [
				{ src: 'lib/js/classList.js', condition: function() { return !document.body.classList; } },
				{ src: 'plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
				{ src: 'plugin/zoom-js/zoom.js', async: true },
				{ src: 'plugin/notes/notes.js', async: true }
			]
		});

	</script>

</body>
</html>
